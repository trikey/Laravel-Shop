// Generated by CoffeeScript 1.10.0
(function() {
  $(function() {
    var cart_path, doneClickingInterval, getOrder, getTopCart, imageShowCase, isMobile, mySwiper, options, owl, parallaxScroll, pshowcase, swiper_container, timer, touchSpin, tshopScroll, updateScrollBars;
    getTopCart = function() {
      return $.ajax({
        url: "/ajax/cart.php",
        data: {
          act: "get_top_cart"
        },
        type: "POST",
        success: function(data) {
          $("#top_cart").html(data);
          return updateScrollBars();
        }
      });
    };
    getOrder = function() {
      return $.ajax({
        url: "/ajax/cart.php",
        data: {
          act: "get_order"
        },
        type: "POST",
        success: function(data) {
          $('#order_component').html(data);
          return $("input[type='radio'], input[type='checkbox']").ionCheckRadio();
        }
      });
    };
    cart_path = '/personal/cart/';
    updateScrollBars = function() {
      $(".scroll-pane").mCustomScrollbar({
        advanced: {
          updateOnContentResize: true
        },
        scrollButtons: {
          enable: false
        },
        mouseWheelPixels: "200",
        theme: "dark-2"
      });
      return $(".smoothscroll").mCustomScrollbar({
        advanced: {
          updateOnContentResize: true
        },
        scrollButtons: {
          enable: false
        },
        mouseWheelPixels: "100",
        theme: "dark-2"
      });
    };
    touchSpin = function() {
      return $(".quanitySniper").TouchSpin({
        buttondown_class: "btn btn-link",
        buttonup_class: "btn btn-link"
      });
    };
    $(document).on("click", ".add_to_cart", function() {
      var $this, max_quantity, product_id, quantity, size;
      product_id = $(this).attr("data-product-id");
      quantity = $("#quantity_" + product_id).val();
      $this = $(this);
      size = $("#size_" + product_id).find("option:selected").val();
      max_quantity = $("#size_" + product_id).find("option:selected").attr('data-max-quantity');
      if (quantity > max_quantity) {
        $("#added-to-cart").css('top', $(this).offset().top + 'px');
        $("#added-to-cart").removeClass("hide");
        setTimeout((function() {
          return $("#added-to-cart").addClass("hide");
        }), 3000);
        return false;
      }
      $.ajax({
        url: "/ajax/cart.php",
        data: {
          act: "add2cart",
          product_id: product_id,
          quantity: quantity,
          props: {
            size: size
          }
        },
        type: "POST",
        success: function(data, textStatus, jqXHR) {
          $("#top_cart").html(data);
          updateScrollBars();
          $this.die("click");
          $("body").append('<img src="http://mixmarket.biz/uni/tev.php?id=1294938447&r=' + escape(document.referrer) + '&t=' + (new Date()).getTime() + '" width="1" height="1"/>');
          return $this.text($this.attr("data-in-cart-text")).removeClass('add_to_cart').addClass('in-cart').off().addClass('to_cart');
        }
      });
      return false;
    });
    $(document).on('click', '.to_cart', function() {
      window.location = cart_path;
      return false;
    });
    $(".form_auth_wide").validate({
      submitHandler: function(form) {
        $.ajax({
          type: "post",
          data: $(".form_auth_wide").serialize(),
          url: "/ajax/login.php",
          dataType: "json",
          success: function(data, textStatus, jqXHR) {
            if (data.status === "success") {
              return window.location.reload();
            } else {
              return $("#auth_errors_wide").html(data.info).show();
            }
          }
        });
        return false;
      }
    });
    $(".form_auth").validate({
      submitHandler: function(form) {
        $.ajax({
          type: "post",
          data: $(".form_auth").serialize(),
          url: "/ajax/login.php",
          dataType: "json",
          success: function(data, textStatus, jqXHR) {
            if (data.status === "success") {
              return window.location.reload();
            } else {
              return $("#auth_errors").html(data.info).show();
            }
          }
        });
        return false;
      }
    });
    $(".form_register").validate({
      submitHandler: function(form) {
        $.ajax({
          type: "post",
          data: $(".form_register").serialize(),
          url: "/ajax/register.php",
          dataType: "json",
          success: function(data, textStatus, jqXHR) {
            if (data.status === "success") {
              return window.location.reload();
            } else {
              return $("#register_errors").html(data.info).show();
            }
          }
        });
        return false;
      }
    });
    $('#product-details-modal').on('show.bs.modal', function(event) {
      var button, product_card, script;
      button = $(event.relatedTarget);
      product_card = button.data('product-id');
      console.log(product_card);
      $("#product-card-content").html($("#modal-card-" + product_card).html());
      $("#product-details-modal select").minimalect();
      $("#product-card-content").find(".addthis_sharing_toolbox2").addClass("addthis_sharing_toolbox");
      script = 'http://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5606a674f234f9d4';
      if (window.addthis) {
        window.addthis = null;
        window._adr = null;
        window._atc = null;
        window._atd = null;
        window._ate = null;
        window._atr = null;
        window._atw = null;
      }
      return $.getScript(script);
    });
    if ((swiper_container = $(".swiper-container")).length) {
      mySwiper = new Swiper(".swiper-container", {
        pagination: ".box-pagination",
        keyboardControl: true,
        paginationClickable: true,
        slidesPerView: 'auto',
        autoResize: true,
        resizeReInit: true
      });
      $('.prevControl').on("click", function(e) {
        e.preventDefault();
        return mySwiper.swipePrev();
      });
      $('.nextControl').on("click", function(e) {
        e.preventDefault();
        return mySwiper.swipeNext();
      });
    }
    $(document).on("click", ".search-box .getFullSearch", function(e) {
      $('.search-full').addClass("active");
      return e.preventDefault();
    });
    $(document).on("click", ".delete_cart_item", function() {
      var basket_id;
      basket_id = $(this).attr("data-basket-id");
      $.ajax({
        url: "/ajax/cart.php",
        data: {
          act: "delete",
          basket_id: basket_id
        },
        type: "POST"
      }).done(function(data) {
        $("#top_cart").html(data);
        $('#top_cart_desctop').addClass('hover');
        updateScrollBars();
        return $.ajax({
          url: "/ajax/cart.php",
          data: {
            act: "get_cart"
          },
          type: "POST"
        }).done(function(data) {
          $("#main_cart").html(data);
          touchSpin();
          return getOrder();
        });
      });
      return false;
    });
    $(document).on('mouseover', '#top_cart_desctop', function(e) {
      return $(this).addClass('hover');
    });
    $(document).on('mouseout', '#top_cart_desctop', function(e) {
      return $(this).removeClass('hover');
    });
    timer = 0;
    doneClickingInterval = 500;
    touchSpin();
    $(document).on("change", ".quanitySniper", function() {
      var $this, basket_id, quantity;
      clearTimeout(timer);
      $this = $(this);
      basket_id = $this.attr("data-basket-id");
      quantity = $this.val();
      return timer = setTimeout((function() {
        return $.ajax({
          url: "/ajax/cart.php",
          data: {
            basket_id: basket_id,
            act: "main_update",
            quantity: quantity
          },
          type: "POST"
        }).done(function(data) {
          $("#main_cart").html(data);
          touchSpin();
          getTopCart();
          return getOrder();
        });
      }), doneClickingInterval);
    });
    $(document).on("click", ".delete_main_item", function() {
      var basket_id;
      basket_id = $(this).attr("data-basket-id");
      $.ajax({
        url: "/ajax/cart.php",
        data: {
          act: "main_delete",
          basket_id: basket_id
        },
        type: "POST"
      }).done(function(data) {
        $("#main_cart").html(data);
        touchSpin();
        getTopCart();
        return getOrder();
      });
      return false;
    });
    $(document).on("click", "#coupon_apply", function() {
      var coupon;
      coupon = $(".coupon_in_cart").val();
      $.ajax({
        url: "/ajax/cart.php",
        data: {
          coupon: coupon,
          act: "apply_coupon"
        },
        type: "POST"
      }).done(function(data) {
        $("#main_cart").html(data);
        touchSpin();
        getTopCart();
        return getOrder();
      });
      return false;
    });
    $(window).load(function() {
      updateScrollBars();
      $("select").not(".hidden-select").minimalect();
      return $("#catalog_sort").minimalect({
        onchange: function(value, text) {
          return window.location = value;
        }
      });
    });
    $("#productslider").owlCarousel({
      pagination: false,
      navigation: true,
      navigationText: ['<', '>'],
      items: 4,
      itemsTablet: [768, 2]
    });
    owl = $(".brand-carousel");
    owl.owlCarousel({
      navigation: false,
      pagination: false,
      items: 8,
      itemsTablet: [768, 4],
      itemsMobile: [400, 2]
    });
    $("#nextBrand").click(function() {
      return owl.trigger('owl.next');
    });
    $("#prevBrand").click(function() {
      return owl.trigger('owl.prev');
    });
    $("#SimilarProductSlider").owlCarousel({
      navigation: true,
      navigationText: ['<', '>']
    });
    pshowcase = $("#productShowCase");
    pshowcase.owlCarousel({
      autoPlay: 4000,
      stopOnHover: true,
      navigation: false,
      paginationSpeed: 1000,
      goToFirstSpeed: 2000,
      singleItem: true,
      autoHeight: true
    });
    $("#ps-next").click(function() {
      return pshowcase.trigger('owl.next');
    });
    $("#ps-prev").click(function() {
      return pshowcase.trigger('owl.prev');
    });
    imageShowCase = $("#imageShowCase");
    imageShowCase.owlCarousel({
      autoPlay: 4000,
      stopOnHover: true,
      navigation: false,
      pagination: false,
      paginationSpeed: 1000,
      goToFirstSpeed: 2000,
      singleItem: true,
      autoHeight: true
    });
    $("#ps-next").click(function() {
      return imageShowCase.trigger('owl.next');
    });
    $("#ps-prev").click(function() {
      return imageShowCase.trigger('owl.prev');
    });
    $('.categoryProduct > .item').responsiveEqualHeightGrid();
    $('.thumbnail.equalheight').responsiveEqualHeightGrid();
    $('.featuredImgLook2 .inner').responsiveEqualHeightGrid();
    $('.featuredImageLook3 .inner').responsiveEqualHeightGrid();
    $(document).on("click", ".modal-product-thumb a", function() {
      var largeImage;
      largeImage = $(this).find("img").attr('data-large');
      $(this).parents(".modal-card-img-container").find(".product-largeimg").attr('src', largeImage);
      return $(".zoomImg").attr('src', largeImage);
    });
    $('.collapseWill').on('click', function(e) {
      $(this).toggleClass("pressed");
      return e.preventDefault();
    });
    $('.search-close').on('click', function(e) {
      $('.search-full').removeClass("active");
      return e.preventDefault();
    });
    $(".dropdown-tree-a").click(function() {
      return $(this).parent('.dropdown-tree').toggleClass("open-tree active");
    });
    $('.add-fav').click(function(e) {
      e.preventDefault();
      $(this).addClass("active");
      return $(this).attr('data-original-title', 'Added to Wishlist');
    });
    $(".change-view .list-view, .change-view-flat .list-view").click(function(e) {
      e.preventDefault();
      $('.item').addClass("list-view");
      $('.add-fav').attr("data-placement", $(this).attr("left"));
      return $('.categoryProduct > .item').detectGridColumns();
    });
    $(".change-view .grid-view, .change-view-flat .grid-view").click(function(e) {
      e.preventDefault();
      $('.item').removeClass("list-view");
      $('.categoryProduct > .item').detectGridColumns();
      return setTimeout((function() {
        return $('.categoryProduct > .item').responsiveEqualHeightGrid();
      }), 500);
    });
    $(document).on("click", ".swatches li", function() {
      $(this).parent().find("li").removeClass("selected");
      return $(this).addClass('selected');
    });
    $(".modal-product-thumb a").click(function() {
      $(".modal-product-thumb a.selected").removeClass("selected");
      return $(this).addClass('selected');
    });
    if (/IEMobile/i.test(navigator.userAgent)) {
      $('.navbar-brand').addClass('windowsphone');
    }
    isMobile = function() {
      return /(iphone|ipod|ipad|android|blackberry|windows ce|palm|symbian)/i.test(navigator.userAgent);
    };
    if (isMobile()) {
      $('.introContent').addClass('ismobile');
    } else {
      tshopScroll = 0;
      $(window).scroll(function(event) {
        var ts;
        ts = $(this).scrollTop();
        if (ts > tshopScroll) {
          $('.navbar').addClass('stuck');
        } else {
          $('.navbar').removeClass('stuck');
        }
        if (ts < 600) {
          $('.navbar').removeClass('stuck');
        }
        return tshopScroll = ts;
      });
    }
    if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
      $('.parallax-section').addClass('isios');
      $('.navbar-header').addClass('isios');
      $('.blog-intro').addClass('isios');
    }
    if (/Android|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
      $('.parallax-section').addClass('isandroid');
    }
    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
      $('.parallax-section').addClass('ismobile');
      $('.parallaximg').addClass('ismobile');
    } else {
      $(window).bind('scroll', function(e) {
        return parallaxScroll();
      });
      parallaxScroll = function() {
        var sc, scrolledY;
        scrolledY = $(window).scrollTop();
        sc = (scrolledY * 0.3) + 'px';
        return $('.parallaximg').css('marginTop', '' + (scrolledY * 0.3) + 'px');
      };
      if ($(window).width() < 768) {

      } else {
        $('.parallax-image-aboutus').parallax("50%", 0, 0.2, true);
        $('.parallaxbg').parallax("50%", 0, 0.2, true);
      }
    }
    window.onload = function() {
      return $(window).scroll(function() {
        if ($(window).scrollTop() > 86) {
          $('.parallax-image-aboutus .animated').removeClass('fadeInDown');
          $('.parallax-image-aboutus .animated').addClass('fadeOutUp');
        } else {
          $('.parallax-image-aboutus .animated').addClass('fadeInDown');
          $('.parallax-image-aboutus .animated').removeClass('fadeOutUp');
        }
        if ($(window).scrollTop() > 250) {

        } else {

        }
      });
    };
    if ($(window).width() < 989) {
      $('.collapseWill').trigger('click');
    } else {

    }
    $(".tbtn").click(function() {
      return $(".themeControll").toggleClass("active");
    });
    $("input[type='radio'], input[type='checkbox']").ionCheckRadio();
    $('.tooltipHere').tooltip('hide');
    options = [];
    $('.dropdown-menu').find('input').click(function(e) {
      return e.stopPropagation();
    });
    $(".scrollto").click(function(event) {
      var dest;
      event.preventDefault();
      dest = 0;
      if ($(this.hash).offset().top > $(document).height() - $(window).height()) {
        dest = $(document).height() - $(window).height();
      } else {
        dest = $(this.hash).offset().top;
      }
      return $('html,body').animate({
        scrollTop: dest - 51
      }, 1000, 'swing');
    });
    $(".tablebodytext").remove();
    $("#ex2").slider();
    $("#ex2").on('slideStop', function(event) {
      var vals;
      vals = event.value;
      $('.filter_min_price').val(vals[0]);
      $('.filter_min_price').trigger('keyup');
      $('.filter_max_price').val(vals[1]);
      return $('.filter_max_price').trigger('keyup');
    });
    $('.set_list_view').click(function() {
      var view;
      view = $(this).data('list-view');
      return $.ajax({
        type: 'post',
        data: {
          view: view
        },
        url: '/ajax/set_view.php'
      });
    });
    if ($('.active_catalog_view').length > 0) {
      $('.item').addClass('list-view');
    }
    $("#buy_one_click_phone").mask("+7 (999) 999-9999");
    $('#buy_in_one_click').on('show.bs.modal', function(event) {
      var button, product_card;
      button = $(event.relatedTarget);
      product_card = button.data('product-id');
      $('#buy_in_one_click_product_id').val(product_card);
      return $('#product-details-modal').modal('hide');
    });
    return $('#buy_in_one_click_submit_btn').click(function() {
      var error, form, thanks;
      form = $('#buy_in_one_click_form');
      thanks = $('#thanks_buy_one_click');
      error = false;
      form.find('input[type=text].required').each(function() {
        if ($(this).val().length) {
          return $(this).parent().removeClass('has-error');
        } else {
          $(this).parent().addClass('has-error');
          return error = true;
        }
      }).promise().done(function() {
        if (!error) {
          return $.ajax({
            type: 'post',
            data: form.serialize(),
            url: form.attr('action')
          }).done(function(data) {
            var text;
            form.hide();
            thanks.show();
            $("body").append(data);
            return text = 'good';
          });
        }
      });
      return false;
    });
  });

}).call(this);

//# sourceMappingURL=application.js.map
